## 操作系统的要求 ##

1、能合理的管理计算机资源，使计算机内的各部件流畅的工作，相互协同。

2、暴露给操作者的接口要简单，做到见名知意，方便了用户的操作。

3、可移植性要好，能在不同的硬件中运行，我们需要用必要的代码去屏蔽掉各种硬件的差异。还有各种应用程序在不同的操作系统中能运行。但像C语言这样的，编译器直接将它写出来的程序翻译成机器码，不同的系统翻译机器码的方式不同，所以说C语言写出来的程序可移植性差。像python和java写出来的程序可移植性就比较好。



## 操作系统的功能 ##

1、进程管理。不同的进程可以共享资源，但有需要独立的工作。

2、内存管理。合理的把内存资源分给进程使用，但一些程序需要的内存资源比较大，有时内存本身无法满足程序的要求，这时我们需要用到虚拟内存，虚拟内存是按一种策略（虚拟管理策略）从硬盘中分出来给内存使用，程序看到的虚拟内存是连续的，但其实不然。

3、I/O管理，管理计算机与外部设备（键盘，显示器，打印机等等）的通信。


4、能提供给操作者操作界面，一种是命令行解释器（CLI），另一种是图形用户界面（GUI）。相对来说，前者比后者更安全,bug少。服务器一般都是用命令行解释器界面。



5、文件管理。简单来说就是要组织好计算机里的数据，能帮助用户很好的存放和使用这些数据。

6、系统调用。能让我们的应用程序使用操作系统暴露出来的接口，从而使用系统服务。这时我们的应用程序将要从用户态陷入到内核态，内核态执行完对应的函数后返回给应用程序。



## 操作系统模块划分 ##

1、系统内核。里面是特权模式（ring0）下执行的代码,都是操作系统的核心服务。

2、用户空间。非特权模式（ring1-ring3）下执行的代码,如应用程序。


3、服务/守护进程。后台模式下运行的程序。

4、实用程序。操作系统提供的如shell,编译器，编辑器等程序。

5、系统调用。操作系统所提供给用户的接口，让用户能够使用到系统服务。

6、C库（libc）。这是对系统函数的封装，让用户在不同的平台能实现相同的功能。


## 操作系统的架构 ##

1、分层架构系统

分层架构系统的优势是层与层之间的关系明确，结构关系好，从应用程序到硬件一层层的往下请求，上一层负责发送请求，下一层负责向上响应请求。
难点是需要找出功能相似的组件划为一层。这种架构的缺点是，层与层之间按消息传递，如果中间层太多则会影响效率。


2、单内核架构

单内核架构是将所有的核心服务都归结到内核态，模块与模块之间无层次关系，模块与模块之间的通信不是消息传递而是直接调用，所以单内核架构系统的效率高。模块与模块之间的关系不明确。它的数据和代码共享内存空间，会导致安全性降低，bug可能多。


3、微内核架构

微内核架构系统是将重要的核心服务放在内核态中，而其他的服务放在用户态中。这样的好处是处于用户态的服务如果受到影响则不会干扰到内核态中的服务的运行。同时运行在ring0级别的代码量减少，内核的安全性增强，可扩展性也得到提高。但是，由于处于用户态的服务不能直接调用内核态的服务，只能按消息传递的方式通信，所以这种系统的性能相对于单内核架构系统的性能要低一些。


4、混合架构


混合架构系统将单内核架构与微内核架构结合了一下，取长补短，使得性能和安全性能够相对较强。实际中的操作系统多是采用混合架构。


<img src="./123.jpg" />

